<?xml version="1.0" encoding="ISO-8859-1"?>
<db_body>
  <id_table data_type="integer" is_pk="true">11007</id_table>
  <db_name data_type="character varying" is_pk="true">PG</db_name>
  <body data_type="text" is_pk="false"><![CDATA[SELECT ATT.ATTNAME AS COLUMN_NAME, CL.RELNAME AS TABLE_NAME, ATT.ATTNUM AS POSITION,
	   N1.NSPNAME AS OWNER, FK.CONNAME AS CONSTRAINT_NAME
FROM PG_CATALOG.PG_ATTRIBUTE ATT
JOIN PG_CATALOG.PG_CLASS CL ON CL.OID = ATT.ATTRELID
JOIN PG_CATALOG.PG_CONSTRAINT FK ON FK.CONRELID = CL.OID
 						  	    AND ATT.ATTNUM IN (SELECT UNNEST(FK.CONKEY))
                                AND FK.CONTYPE = 'f'
LEFT JOIN PG_CATALOG.PG_NAMESPACE N1 ON (N1.OID = CL.RELNAMESPACE)
WHERE ATT.ATTISDROPPED = FALSE
 
UNION ALL

SELECT ATT.ATTNAME AS COLUMN_NAME, CL.RELNAME AS TABLE_NAME, ATT.ATTNUM AS POSITION,
	   N1.NSPNAME AS OWNER, PK.CONNAME AS CONSTRAINT_NAME
FROM PG_CATALOG.PG_ATTRIBUTE ATT
JOIN PG_CATALOG.PG_CLASS CL ON CL.OID = ATT.ATTRELID
					  	   AND CL.relhaspkey = TRUE
JOIN PG_CATALOG.PG_CONSTRAINT PK ON PK.CONRELID = CL.OID
 						  	    AND ATT.ATTNUM IN (SELECT UNNEST(PK.CONKEY))                                
                                AND PK.CONTYPE = 'p'
LEFT JOIN PG_CATALOG.PG_NAMESPACE N1 ON (N1.OID = CL.RELNAMESPACE)
WHERE ATT.ATTISDROPPED = FALSE;]]></body>
  <usuario_created data_type="character varying" is_pk="false"/>
</db_body>
